<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>G.L.O.M.G. | CORE V32.8</title>
    <link rel="stylesheet" href="style.css">
    <script src="/socket.io/socket.io.js"></script>
</head>
<body oncontextmenu="return false;">
    <div id="fade-overlay"></div>
    <div id="side-overlay" onclick="toggleSidebar(false)"></div>
    <canvas id="matrix-canvas"></canvas>

    <section id="scr-login" class="screen">
        <div class="login-frame">
            <h1 class="glitch" data-text="G.L.O.M.G.">G.L.O.M.G.</h1>
            <div id="output" class="terminal-output"></div>
            <div class="login-form">
                <div class="input-line"><span class="prompt">ID:> </span><input type="text" id="cmd" autofocus autocomplete="off"></div>
                <div class="guest-btn" onclick="toggleGuest()">[ GUEST_ACCESS ]</div>
            </div>
        </div>
    </section>

    <section id="scr-guest" class="screen hidden">
        <header class="status-bar">
            <button class="btn-ui-nav" onclick="location.reload()">BACK</button>
            <div class="system-status">
                <span class="status-led"></span> SYSTEM_OK
            </div>
            <div id="clock">00:00:00</div>
        </header>
        
        <div class="guest-layout">
            <div class="guest-sidebar">
                <h3 style="color: #0f4; border-bottom: 1px solid #0f4;">INFO</h3>
                <p>PROJECT: G.L.O.M.G.</p>
                <p>CORE: V32.8</p>
                <p>STATUS: PUBLIC</p>
                <hr style="opacity: 0.2;">
                <p style="font-size: 10px; opacity: 0.6;">Доступ ограничен. Функции администратора заблокированы.</p>
            </div>
            
            <div class="guest-main">
                <div class="guest-news">
                    <h3 style="color: #0f4;">NEWS_FEED</h3>
                    <div id="news-list">
                        <div class="news-item">>> [2026-01-27] Ядро системы запущено в штатном режиме.</div>
                        <div class="news-item">>> [2026-01-27] Протоколы связи с Telegram стабилизированы.</div>
                        <div class="news-item">>> [2026-01-27] Гостевой терминал открыт для посетителей.</div>
                    </div>
                </div>
                
                <div class="guest-console">
                    <div id="guest-terminal-out" style="height: calc(100% - 30px); overflow-y: auto; font-size: 13px;"></div>
                    <div class="input-line">
                        <span class="prompt" style="color: #0f4;">GUEST@CORE:> </span>
                        <input type="text" id="guest-cmd" autocomplete="off" style="background: transparent; border: none; color: #0f4; outline: none; width: 100%;">
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="scr-dash" class="screen hidden">
        <header class="status-bar">
            <button class="btn-ui-nav" onclick="toggleSidebar(true)">MENU</button>
            <div id="clock">00:00:00</div>
        </header>
        <div class="center-layout">
            <h2>OPERATOR: <span id="user-name-display">---</span></h2>
            <div class="dash-btns">
                <button class="mega-btn" onclick="startTransition('scr-radar')">РАДАР</button>
                <button class="mega-btn" onclick="startTransition('scr-archive')">АРХИВ</button>
                <button class="mega-btn" onclick="startTransition('scr-mail')">ПОЧТА [<span id="mail-count">0</span>]</button>
            </div>
        </div>
    </section>

    <section id="scr-archive" class="screen hidden">
        <header class="status-bar"><button class="btn-ui-nav" onclick="startTransition('scr-dash')">BACK</button><div>DATABASE_ARCHIVE</div></header>
        <div class="center-layout">
            <div id="archive-list" style="width: 90%; max-height: 70vh; overflow-y: auto; margin-top: 20px; padding-bottom: 50px;">
                </div>
        </div>
    </section>

    <section id="scr-mail" class="screen hidden">
        <header class="status-bar"><button class="btn-ui-nav" onclick="startTransition('scr-dash')">BACK</button><div>INBOX</div></header>
        <div class="center-layout">
            <div id="mail-list" style="width: 90%; margin-top: 20px;"></div>
        </div>
    </section>

    <section id="scr-radar" class="screen hidden">
        <header class="status-bar"><button class="btn-ui-nav" onclick="startTransition('scr-dash')">BACK</button><div>TACTICAL_RADAR</div></header>
        <div class="radar-fullscreen">
            <div class="radar-line-scanner"></div>
            <div class="node lab-ong" style="top:25%; left:30%;"></div>
            <div class="node bunker-prism" style="top:45%; left:75%;"></div>
            <div class="node reactor-duk" style="top:75%; left:45%;"></div>
        </div>
    </section>

    <div id="sidebar" class="sidebar">
        <div class="sidebar-header">PROFILE_DATA</div>
        <div class="old-profile-style">
            <p>NAME: <span id="p-name">---</span></p>
            <p>LEVEL: <span id="p-lvl">---</span></p>
        </div>
        <button class="btn-ui-logout" onclick="logout()">LOGOUT</button>
    </div>

    <script src="script.js"></script>
</body>
</html>
